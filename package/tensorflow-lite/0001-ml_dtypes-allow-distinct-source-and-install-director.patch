From e05193ca8fc81d83616ce37d47c75629b1edf901 Mon Sep 17 00:00:00 2001
From: "Robert B. Calhoun" <rcalhoun@shotspotter.com>
Date: Wed, 18 Jun 2025 14:20:16 +0000
Subject: [PATCH 1/3] ml_dtypes: allow distinct source and install directories

---
 tensorflow/lite/tools/cmake/modules/ml_dtypes/CMakeLists.txt | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/tensorflow/lite/tools/cmake/modules/ml_dtypes/CMakeLists.txt b/tensorflow/lite/tools/cmake/modules/ml_dtypes/CMakeLists.txt
index 91e893ee377..1e8e7b1f7ce 100644
--- a/tensorflow/lite/tools/cmake/modules/ml_dtypes/CMakeLists.txt
+++ b/tensorflow/lite/tools/cmake/modules/ml_dtypes/CMakeLists.txt
@@ -23,9 +23,10 @@ if(NOT ML_DTYPES_SOURCE_DIR)
 endif()
 
 add_library(ml_dtypes INTERFACE)
+# https://github.com/tensorflow/tensorflow/issues/62381#issuecomment-1875381357
 target_include_directories(ml_dtypes INTERFACE
-  "${ML_DTYPES_SOURCE_DIR}"
-  "${ML_DTYPES_SOURCE_DIR}/ml_dtypes")
+  "$<BUILD_INTERFACE:${ML_DTYPES_SOURCE_DIR}>" "$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>"
+  "$<BUILD_INTERFACE:${ML_DTYPES_SOURCE_DIR}/ml_dtypes>" "$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}/ml_dtypes>")
 file(GLOB ML_DTYPES_PUBLIC_HEADERS
   ${ML_DTYPES_SOURCE_DIR}/ml_dtypes/include/*.h)
 set_target_properties(ml_dtypes PROPERTIES
-- 
2.43.0

